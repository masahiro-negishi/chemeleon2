# @package _global_
defaults:
  - override /data: mp-120
  - override /ldm_module: ldm_module
  - override /callbacks: default
  - override /logger: wandb
  - override /scheduler: constant
  - override /trainer: default
  - override /paths: default
  - override /hydra: default

trainer:
  max_epochs: 1000
  strategy: "ddp_find_unused_parameters_true"

data:
  batch_size: 128
  target_condition: "composition" # ["dft_band_gap", "chemical_system", "ml_bulk_modulus", "composition"]

ldm_module:
  ldm_ckpt_path: ckpts/mp_120/ldm/ldm_rl_dng_lfczlivd.ckpt

  condition_module:
    condition_type: { composition: "composition" }
    stats: { composition: None }
    hidden_dim: 768
    drop_prob: 0.2

  # lora_configs:
  # r: 16
  # lora_alpha: 32
  # lora_dropout: 0.1
  # target_modules: ["attn.out_proj", "mlp.fc1", "mlp.fc2"]
  # bias: "none"

logger:
  wandb:
    name: "ldm_composition_finetuned_from_rl_dng"
    group: "${task_name}/${data.dataset_type}/condition"
    tags: ["ldm", "dng", "condition", "finetune", "composition"]
